<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-signin-client_id" content="244299986178-16s1c4qbq6k1j16p083ssmfvoiqr07rf.apps.googleusercontent.com">
    <title>Document</title>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/progressbar.js/1.0.0/progressbar.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600,800,900" rel="stylesheet" type="text/css">
</head>
<link rel="stylesheet" href="profile.css">
<link rel="stylesheet" type="text/css" href="loading-bar.css"/>

<body>
 <div class="masterwrap">

  
  
  

  <div class="sidebar card1">
    <div class="flexwraprow center">

      
      <div id="data"><%=doc1%></div>
      <img id="userpicture"src=<%= userpicture %> >
      <div id="user"><%=loginuser%></div>
      

      
    </div>
  
  
    
    <div class="flexwraprow card1">
      <button class="button card2" onclick="logpage()">log my hours </button>
      <button class="button card2" onclick="monthlyreport()">Generate a monthly report </button>
      <button class="button card2" onclick="calender()">Mark my avalabilities </button>
      <button class="button card2" onclick="Todolist()">Things to do and buy </button>
      <button class="button card2" onclick="orientation()">Orientation </button>
      <button class="button card2" onclick="signout()">Signout </button>
      

    </div>


  </div>

  
 

  <div class=" hourprogress card flexwrapcolumn">
    <p>Your Hours this month </p>

      

    <div id="container"></div>
    
    <div id="totalhour"></div>

  </div>


 


  
  <div class="progress" id="progress"></div>
   
  
  <div class="chart-container card">
    <canvas id="myChart"></canvas>

    </div>

  

  
  <div class="card history card">
    <ul id="loggedlist" >
      <h3>this is my logged history for this month  </h3>
      <table id="heading"style="width:100%">
        <tr style="padding:5px; width: 25%;">
          <th>Date</th>
          <th>Resident</th>
          <th>Activities</th>
          <th>Outcome</th>
          <th>Hours </th>
        </tr>
        
      </table>


    </ul>
  </div>
  
  


 </div>
   
   

    
</body>
<script>



// Assuming we have an empty <div id="container"></div> in
// HTML


  

var info = document.getElementById("data").innerHTML;
console.log(info)
var user = document.getElementById("user").innerText;
var finaldata= JSON.parse(info)
var milano= finaldata.Milano
var serrento= finaldata.Serrento
var toscano= finaldata.toscano
var others = finaldata.others
console.log(others)
var totalhour= milano+serrento+toscano
var totalhourconverted=totalhour/30
var totalhourconvertedstring = `${Math.ceil(totalhour/30*100)}%`
var log = finaldata.loggeddetails

var totalhours= document.getElementById("totalhour");


totalhours.innerText=`${totalhour}/30`;





var list = document.getElementById("heading")
var loggedlist= document.getElementById("loggedlist")

//create row 
for (i=0;i<log.length;i++){
  var newrow= document.createElement('tr')
newrow.style="padding:5px; width: 25%;"
//put that in existing table , will us efor loop to implememt 
list.appendChild(newrow)

for (var j = 0; j < log[i].length; j++) {
    var content = log[i][j];
    console.log(content)
    var li = document.createElement('th');
    li.innerText= content
    newrow.appendChild(li);
}
//inner for loop 

}






var ctx = document.getElementById("myChart");
function logpage(){
  location.assign(`/${user}/loghours`)
}

function monthlyreport(){
  location.assign(`/${user}/monthlyreport`)

}
function calender(){
  location.assign(`/calender`)

}
function signout(){
  location.assign(`/logout`)

}
function Todolist(){
  location.assign(`/todolist`)

}
function orientation(){
  location.assign(`/orientation`)

}
  
   

 
   
var myChart = new Chart(ctx, {
  type: 'doughnut',
  data: {
    labels: ['milano', 'toscano', 'serrenton','others'],
    datasets: [{
      label: '# of Tomatoes',
      data: [milano,toscano,serrento,others],
      backgroundColor: [
        'rgba(255, 99, 132)',
        'rgba(54, 162, 235)',
        'rgba(255, 206, 86)',
        'rgba(75, 192, 192)'
      ],
      borderColor: [
        'rgba(255,99,132,1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)'
      ],
      borderWidth: 5
    }]
  },
  options: {
   	//cutoutPercentage: 40,
    responsive: true,
    
    responsiveAnimationDuration: 1000
   

  }
});

var bar = new ProgressBar.Circle(container, {
  color: '#aaa',
  // This has to be the same size as the maximum width to
  // prevent clipping
  strokeWidth: 20,
  trailWidth: 10,
  easing: 'easeInOut',
  duration: 1400,
  text: {
    autoStyleContainer: false
  },
  from: { color: '#aaa', width: 1 },
  to: { color: '#FF69B4', width: 4 },
  // Set default step function for all animate calls
  step: function(state, circle) {
    circle.path.setAttribute('stroke', state.color);
    circle.path.setAttribute('stroke-width', state.width);

    var value = Math.round(circle.value() * 100);
    if (value === 0) {
      circle.setText('');
    } else {
      circle.setText(`${value}%`);
    }

  }
});
bar.text.style.fontFamily = '"Raleway", Helvetica, sans-serif';
bar.text.style.fontSize = '2rem';

bar.animate(totalhourconverted);


   

///////////////////

</script>
<script type="text/javascript" src="loading-bar.js"></script>

</html>